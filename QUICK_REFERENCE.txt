# Quick Reference Card

## ğŸ“‹ Deployment Checklist

```
BEFORE DEPLOYING:
â–¡ .gitignore has: *.env, client_secret.json, credentials.json
â–¡ No .env or client_secret.json showing in `git status`
â–¡ requirements.txt is up to date
â–¡ app.py has correct __main__ section
â–¡ Procfile says: web: gunicorn app:app
â–¡ package.json has build: npm run build

STEP 1 - RAILWAY (BACKEND):
â–¡ Go to railway.app
â–¡ Sign up with GitHub
â–¡ Create new project from your repo
â–¡ Wait for deploy (2-3 min)
â–¡ Copy domain: https://xxx.railway.app
â–¡ Add env variables in Railway dashboard

STEP 2 - VERCEL (FRONTEND):
â–¡ Go to vercel.com
â–¡ Sign up with GitHub
â–¡ Import project
â–¡ Set root directory: frontend
â–¡ Add VITE_API_URL env variable
â–¡ Click deploy (2-3 min)
â–¡ Copy domain: https://xxx.vercel.app

STEP 3 - GMAIL:
â–¡ Go to Google Cloud Console
â–¡ Update OAuth redirect URIs:
   âœ“ https://xxx.railway.app/auth/callback
   âœ“ http://localhost:5000/auth/callback
â–¡ Save

STEP 4 - RECONNECT:
â–¡ Go back to Railway
â–¡ Update FRONTEND_URL to your Vercel URL
â–¡ Update CORS_ORIGINS to your Vercel URL
â–¡ Redeploy

STEP 5 - TEST:
â–¡ Visit your Vercel URL
â–¡ Click "Connect with Gmail"
â–¡ Complete OAuth flow
â–¡ Verify you're redirected to Vercel
â–¡ Test dashboard functionality
```

---

## ğŸ”‘ Environment Variables

### Railway (Backend) Dashboard

```
SECRET_KEY=<random-hex>
FRONTEND_URL=https://your-app.vercel.app
CORS_ORIGINS=https://your-app.vercel.app,http://localhost:5173
FLASK_DEBUG=False
GMAIL_CLIENT_SECRETS=<json-or-path>
```

### Vercel (Frontend) Dashboard

```
VITE_API_URL=https://your-backend.railway.app
```

### Local .env (NOT committed)

```
# Backend/.env
SECRET_KEY=dev-secret
FRONTEND_URL=http://localhost:5173
CORS_ORIGINS=http://localhost:5173

# Frontend/frontend/.env.local
VITE_API_URL=http://localhost:5000
```

---

## ğŸŒ URLs You'll Need

| What | URL | Why |
|------|-----|-----|
| Railway Dashboard | https://railway.app | Manage backend |
| Vercel Dashboard | https://vercel.com | Manage frontend |
| Google Cloud | https://console.cloud.google.com | OAuth settings |
| Your Frontend (After) | https://you-app.vercel.app | What users visit |
| Your Backend (After) | https://your-backend.railway.app | API server |

---

## âš ï¸ Common Mistakes

âŒ Committing `.env` file
âœ… Add to `.gitignore` first

âŒ forgetting to update Gmail OAuth URIs
âœ… Must match exactly: `https://xxx.railway.app/auth/callback`

âŒ CORS_ORIGINS doesn't match Vercel domain
âœ… Copy exact domain from Vercel dashboard

âŒ FRONTEND_URL has trailing slash
âœ… Should be: `https://app.vercel.app` (no slash)

âŒ Building locally works, but production breaks
âœ… Check Railway logs: Dashboard â†’ Deployments â†’ logs

---

## ğŸ†˜ Troubleshooting

### CORS Error?
1. Check Vercel dashboard â†’ env var
2. Check Railway variables â†’ env var
3. Redeploy Railway

### Wrong Redirect?
1. Check Railway FRONTEND_URL
2. Check if exactly matches your Vercel domain
3. Redeploy Railway

### 404 on /auth/callback?
1. Go to Google Cloud Console
2. Check redirect URI is set correctly
3. Add exact URL: `https://your-backend.railway.app/auth/callback`

### Backend won't start?
1. Railway Dashboard â†’ Deployments â†’ view logs
2. Fix error locally
3. Push to GitHub
4. Railway auto-redeploys

---

## âœ… Testing Flow

```
1. LOCAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   npm run dev
   python app.py
   Visit http://localhost:5173
   Click "Connect with Gmail"
   âœ“ Should work

2. PRODUCTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Visit https://app.vercel.app
   Click "Connect with Gmail"
   âœ“ Should work
   âœ“ Should redirect to Vercel after login
```

---

## ğŸ“ Git Commands

```bash
# Check what's staged
git status

# Push changes (auto-deploys both services)
git add .
git commit -m "Your message"
git push origin main

# Check history
git log --oneline
```

---

## ğŸ’¾ Local Development

```bash
# Terminal 1: Backend
python app.py
# Runs on http://localhost:5000

# Terminal 2: Frontend
cd frontend
npm run dev
# Runs on http://localhost:5173
```

Visit http://localhost:5173 to test

---

## ğŸš€ After Deployment

**To update code:**
```bash
git push origin main
# Both auto-redeploy in 2-3 minutes
```

**To update environment variables:**
- Railway: Edit in dashboard â†’ Redeploy
- Vercel: Edit in dashboard â†’ auto-redeploys

**To check logs:**
- Railway: Dashboard â†’ Deployments â†’ logs
- Vercel: Dashboard â†’ Deployments â†’ logs

---

## ğŸ“ Support

**If stuck:**
1. Read the error logs (Railway or Vercel dashboard)
2. Test locally first: `python app.py` + `npm run dev`
3. Check all URLs exactly match
4. Verify environment variables set correctly
5. Check Gmail OAuth redirect URIs updated

**Useful:**
- [DEPLOYMENT_FINAL_GUIDE.md](./DEPLOYMENT_FINAL_GUIDE.md) - Full step-by-step
- [DEPLOYMENT_ARCHITECTURE.md](./DEPLOYMENT_ARCHITECTURE.md) - Visual explanation

---

**Good luck with deployment! ğŸ‰**
